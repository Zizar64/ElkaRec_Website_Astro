# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

ElkaRec website - A modern static website for a collegial audiovisual and events association based in Paris. Built with Astro 5, styled with Tailwind CSS 4, and deployed on Cloudflare Pages.

**Key characteristics:**
- Static site generation (SSG) for optimal performance
- French language content
- Dark theme design with red (#ef4444) as primary accent color
- Focus on accessibility and SEO
- No traditional backend - purely static files served via CDN

## Development Commands

```bash
# Install dependencies
npm install

# Start development server (http://localhost:4321)
npm run dev

# Build for production (outputs to ./dist/)
npm run build

# Preview production build locally
npm run preview

# Deploy to Cloudflare Pages (after building)
wrangler pages deploy dist
```

## Architecture & Structure

### Content Management (Astro Content Collections)

The site uses Astro Content Collections for type-safe content management:

- **Blog posts**: `src/content/blog/*.md` - Markdown files with frontmatter schema defined in `src/content/config.ts`
- **Projects**: `src/content/projects/*.md` - Structured project content with categories and tags
- **Schema validation**: Uses Zod for runtime validation of frontmatter fields

**Blog post frontmatter structure:**
```yaml
title: string
description: string
pubDate: date
author: string
tags: string[]
image: string (optional)
```

**Projects frontmatter structure:**
```yaml
title: string
description: string
category: string
tags: string[]
date: date (optional)
image: string (optional)
```

### Component Architecture

**Layout Pattern:**
- Base layout: `src/layouts/Layout.astro` - Contains HTML structure, SEO metadata, Open Graph tags, Schema.org structured data
- All pages import Layout and wrap content with Header/Footer components
- Layout handles: meta tags, SEO, accessibility (skip navigation), theme color

**Key Components:**
- `Header.astro`: Fixed navigation bar with mobile menu (uses client-side script for toggle)
- `Footer.astro`: Site footer
- No framework-specific components - pure Astro components

**Page Structure:**
- Static pages: `src/pages/*.astro` (about, services, projects, join, contact)
- Dynamic blog routes: `src/pages/blog/[...slug].astro` uses `getStaticPaths()` to generate routes from content collections
- Homepage: `src/pages/index.astro` - Hero section, values, services preview, CTA

### Styling System

- **Tailwind CSS 4**: Configured via Vite plugin (`@tailwindcss/vite`)
- **Global styles**: `src/styles/global.css` imports Tailwind and Typography plugin
- **Design tokens**:
  - Primary: red-500 (#ef4444)
  - Background: zinc-950, zinc-900
  - Text: zinc-100, zinc-300, zinc-400
- **Typography Plugin**: `@tailwindcss/typography` for blog content styling

**Typography Configuration (`src/styles/global.css`):**
```css
@import "tailwindcss";
@plugin "@tailwindcss/typography";
```

**Custom Prose Styles** (applied in `src/pages/blog/[...slug].astro`):
- H2: Red color with left border (4px red-500)
- H3/H4: Differentiated sizes and colors
- Links: Red underline with hover effect
- Strong/Bold: White text with red gradient background
- Lists: Red bullet points with good spacing
- Blockquotes: Red left border with semi-transparent red background
- Code: Red styling with borders
- Tables: Proper formatting with borders

### Deployment Configuration

**Cloudflare Pages:**
- Adapter: `@astrojs/cloudflare`
- Output mode: `static` (pre-rendered at build time)
- Site URL: `https://elkarec.fr`
- Wrangler config: `wrangler.toml` (project name: "elkarec", compatibility_date: "2024-01-10")

**Build process:**
1. `npm run build` generates static files to `./dist/`
2. Cloudflare Pages serves files from `./dist/`
3. Image optimization uses Sharp service

### Image Handling

- Image service: Sharp (`astro/assets/services/sharp`)
- Logo: `/public/logo.png` (referenced in Header, Layout)
- Images in `/public/` are served as-is
- Preload critical images in Layout for performance

### SEO & Metadata Strategy

All pages should include:
- Proper `<title>` and `description` meta tags via Layout props
- Canonical URLs (auto-generated by Layout)
- Open Graph tags (og:title, og:description, og:image)
- Twitter Card metadata
- Schema.org structured data (Organization type for homepage)
- Sitemap integration via `@astrojs/sitemap`
- French locale (lang="fr", og:locale="fr_FR")

**Blog Post SEO:**
- Featured images passed to Layout via `image` prop
- Open Graph and Twitter Card tags automatically include article image
- Internal linking between related articles for better SEO
- Use of proper heading hierarchy (H2 → H3 → H4)

### Navigation Structure

Main sections (defined in `Header.astro`):
1. Accueil (/)
2. À propos (/about)
3. Services (/services)
4. Projets (/projects)
5. Blog (/blog)
6. Nous rejoindre (/join)
7. Contact (/contact)

### TypeScript Configuration

- Extends: `astro/tsconfigs/strict`
- Strict type checking enabled
- Astro generates type definitions in `.astro/types.d.ts`

## Development Guidelines

### When Adding New Blog Posts

1. Create `.md` file in `src/content/blog/`
2. Include all required frontmatter fields (see schema in `src/content/config.ts`)
3. Add a featured image in `image` field (path from `/public/`, e.g., `/my-image.png`)
4. Use French date formatting (`formatDate` function in blog slug page)
5. Build automatically generates static routes via `getStaticPaths()`

**Blog Article Structure Best Practices:**

**Formatting Guidelines:**
- Use `---` (horizontal rules) to separate major sections
- Add blank lines between list items for better spacing
- Use blockquotes (`>`) for important quotes or notes
- Use tables for data comparison (metrics, results)
- Keep emoji usage minimal (only for tables with ✅)

**Markdown Structure:**
```markdown
## Main Section

Intro paragraph with **bold** for emphasis and *italics* for technical terms.

### Subsection

- **Item title** — Description with proper spacing

- **Another item** — Each list item separated by blank line

> **Important note**: Use blockquotes for highlighting key information

---

## Next Major Section

**Category name:**

- Point one
- Point two
```

**Internal Linking Strategy:**
- Link to related blog articles for topic deep-dives
- Link to `/projects` when mentioning specific projects (ELKAST, régies, etc.)
- Link to `/services` when discussing available services or formations
- Link to `/contact` for CTAs
- Use descriptive anchor text (not "click here")

**Content Organization:**
- Start with context/problem statement
- Use subheadings to break down complex topics
- Include practical examples and use cases
- End with clear CTAs or next steps
- Add "Pour aller plus loin" section with related links

### When Adding New Pages

1. Create `.astro` file in `src/pages/`
2. Import and use Layout component with proper title/description
3. Wrap with `<Header />` and `<Footer />`
4. Include `id="main-content"` on `<main>` for skip navigation
5. Follow existing color scheme (zinc backgrounds, red accents)

### Accessibility Considerations

- All pages include skip navigation link
- Mobile menu has proper ARIA attributes (aria-expanded, aria-controls)
- Images should have alt text
- Use semantic HTML elements
- Test keyboard navigation for interactive elements

### Working with Images

- Place static images in `/public/`
- Reference as `/image-name.ext` (no public prefix in URLs)
- Logo is preloaded in Layout for performance
- Use width/height attributes for CLS optimization

**Blog Images:**
- Featured images stored in `/public/` directory
- Referenced in frontmatter: `image: "/my-image.png"`
- Automatically used in Open Graph and Twitter Card meta tags
- Displayed at top of blog article (after title, before content)
- Also shown in blog index page preview cards with hover effect

**Image Examples:**
- `/audio-video.png` - IP video/NDI topics
- `/recycling.png` - Eco-conception/sustainability topics
- `/regie-mobile-blog.jpg` - Mobile production rig topics

## Common Patterns

### Date Formatting (French locale)
```javascript
function formatDate(date: Date) {
  return new Intl.DateTimeFormat('fr-FR', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(date);
}
```

### Getting Content Collections
```javascript
import { getCollection } from 'astro:content';
const posts = await getCollection('blog');
const projects = await getCollection('projects');
```

### Dynamic Routes with Static Paths
```javascript
export async function getStaticPaths() {
  const items = await getCollection('blog');
  return items.map((item) => ({
    params: { slug: item.slug },
    props: { item },
  }));
}
```

## Known Configuration Details

- Site URL is `elkarec.fr` (not `.com`)
- French content throughout
- Cloudflare Pages deployment (not Vercel or other platforms)
- No runtime server - fully static
- Tailwind 4 uses new Vite plugin approach (not PostCSS)
- Typography plugin activated via `@plugin` directive in CSS
- Mobile-first responsive design

## Contact Form Configuration

- **Service**: Web3Forms (third-party form handling)
- **Access Key**: `6d5ac646-89c3-4369-aec5-7f0ce1276646`
- **Implementation**: AJAX submission with success/error handling
- **Features**: Honeypot spam protection, custom redirect disabled
- **Location**: `src/pages/contact.astro`

## Social Media Links

Updated across all pages (Footer, Contact, Blog index, Layout schema):
- YouTube: `https://www.youtube.com/@elkarec64`
- LinkedIn: `https://fr.linkedin.com/company/elkarec-audiovisual-events`
- Facebook: `https://www.facebook.com/elkarec/`
- X (Twitter): `https://x.com/elka_rec`
- Instagram: `https://www.instagram.com/elkarec/`
- Twitch: `https://www.twitch.tv/elka_rec`
